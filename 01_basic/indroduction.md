# 🌐 Level 1 — Deep Introduction to Next.js (App Router) — **Full Notes**

---

## 🧠 What is Next.js?

Next.js is a **React framework** that makes building web apps easier, faster, and more powerful.

Normally in React, everything runs on the **client-side** — meaning:
- The browser downloads your JavaScript
- React renders the UI
- And SEO suffers because content isn’t visible until React runs

Next.js fixes all that by adding **server-side features** and **performance optimizations** — all built-in.

---

<!-- - Server-side rendered apps (SSR)
- Static sites (SSG)
- Incremental static regeneration (ISR)
- Full-stack features (API routes inside the same project)
- SEO-friendly pages out of the box -->

---

## ⚙️ Core Features (Quick)

| Feature | Why it matters |
|---------|----------------|
| File-based routing (app/) | Routes are files/folders — no router setup |
| Server Components | Run on server — reduce client bundle size |
| Client Components | Interactive UI — use hooks & events |
| Pre-rendering (SSR / SSG) | Fast & SEO friendly |
| API Routes | Backend endpoints in the same project |
| next/image | Automatic image optimization |
| Metadata API | Easy SEO meta tags per route/layout |

---

## 🏗 Folder Structure (App Router)

```
my-next-app/
 ┣ src/
 ┃ ┗ app/
 ┃    ┣ layout.js        → Root layout (shared wrapper)
 ┃    ┣ page.js          → Home page (route "/")
 ┃    ┣ about/
 ┃    ┃  ┗ page.js       → "/about"
 ┃    ┣ contact/
 ┃    ┃  ┗ page.js       → "/contact"
 ┃    ┗ globals.css      → Global styles (import ONLY in root)
 ┣ public/               → Static files (images, icons)
 ┣ next.config.mjs
 ┣ package.json
 ┗ README.md
```

**Notes**
- Every folder under `src/app/` is a route segment.
- `page.js` makes a route accessible.
- `layout.js` wraps pages in that folder (and nested folders inherit parent layouts).

---

## 🚀 Quick Start

```bash
npx create-next-app@latest nextjs-basics
cd nextjs-basics
npm run dev
# open http://localhost:3000
```

---

## 🔍 What are `layout.js` and `page.js`?

- `page.js` — the content for a specific route (like a page component).
- `layout.js` — the shared wrapper for pages in the same folder (header, footer, providers, etc.).

`layout.js` is similar to React's `App.js` + `Outlet` but hierarchical and automatic.

---

## ✅ Default `layout.js` (auto-generated)

```jsx
// src/app/layout.js
import "./globals.css";
import { Inter } from "next/font/google";

const inter = Inter({ subsets: ["latin"] });

export const metadata = {
  title: "Create Next App",
  description: "Generated by create next app",
};

export default function RootLayout({ children }) {
  return (
    <html lang="en">
      <body className={inter.className}>{children}</body>
    </html>
  );
}
```

---

## 🔎 `layout.js` — Line by line explanation

1. **`import "./globals.css";`**
   - Global CSS must be imported at the root layout (or root `app/` level) only.
   - This file holds CSS resets, base typography, and common utility classes.

2. **`import { Inter } from "next/font/google";`**
   - `next/font` optimizes Google Fonts automatically (no `<link>` tags needed).
   - The returned object has a `.className` to apply the font globally (preferred for performance).

3. **`export const metadata = {...}`**
   - Metadata API: define `title`, `description`, `icons`, open graph, etc.
   - Works at layout or page level. Child metadata can override/extend parent metadata.

4. **`export default function RootLayout({ children })`**
   - `children` = the page content for the current route.
   - This component defines the HTML shell — `<html>`, `<body>`, and shared UI.

5. **`className={inter.className}`**
   - Applies optimized font CSS globally by adding the class on `<body>`.

---

## 🔧 Practical & Beginner-friendly `layout.js` example

This example shows a header with navigation, a footer, and using `next/link` for client navigation.

```jsx
// src/app/layout.js
import "./globals.css";
import Link from "next/link";

export const metadata = {
  title: "My Next.js App",
  description: "A beginner-friendly Next.js App Router example",
};

export default function RootLayout({ children }) {
  return (
    <html lang="en">
      <body>
        <header style={{ padding: 20, background: "#0b1220", color: "#fff" }}>
          <div style={{ maxWidth: 1000, margin: "0 auto", display: "flex", gap: 16 }}>
            <h2 style={{ margin: 0 }}>🌐 MyApp</h2>
            <nav style={{ marginLeft: "auto", display: "flex", gap: 12 }}>
              <Link href="/">Home</Link>
              <Link href="/about">About</Link>
              <Link href="/contact">Contact</Link>
            </nav>
          </div>
        </header>

        <main style={{ maxWidth: 1000, margin: "2rem auto", padding: "0 1rem" }}>
          {children}
        </main>

        <footer style={{ padding: 20, background: "#0b1220", color: "#fff", textAlign: "center" }}>
          © {new Date().getFullYear()} My Next.js App
        </footer>
      </body>
    </html>
  );
}
```

**Best practices**
- Keep the layout lean. Heavy interactive logic in layout increases client bundle.
- Add global providers (Auth, Theme, Redux) in layout so they are available to all pages.
- Import global CSS only here (root).

---

## ⚠️ Client vs Server Components in layout

- By default, files in `app/` are **Server Components** (faster, no client JS).
- If your layout needs client-side interactivity (hooks, state, event handlers), add:
  ```js
  "use client";
  ```
  at the very top. Then the file becomes a **Client Component** and can use hooks like `useState`, `useEffect`.

**Tradeoff**: Client Components increase client bundle size. Only use `"use client"` when necessary (e.g., interactive navbar).

**Async layouts**: Server Components (default) can be `async` to fetch data (e.g., site nav from CMS) before rendering. If you add `"use client"`, you cannot make it `async`.

---

## 🔁 Nested Layouts

You can create layouts at subfolders. Example:

```
app/
 ┣ layout.js           // root layout (header/footer)
 ┣ dashboard/
 ┃ ┣ layout.js        // dashboard layout (sidebar + nested content)
 ┃ ┗ page.js
 ┗ about/
   ┗ page.js
```

When visiting `/dashboard`, Next.js composes root `layout.js` + `dashboard/layout.js` then the dashboard `page.js`. This allows different areas of the app to have their own wrappers.

---

## 🧭 Metadata (SEO)

- Use `export const metadata = { title, description }` in layout or page.
- Page-level metadata overrides or extends parent layout metadata.
- You can define Open Graph, robots, icons as well.

Example:

```js
// app/about/page.js
export const metadata = {
  title: "About | My Next.js App",
  description: "About page for My Next.js App",
};
```

---

## 🖼 Using next/image (optimized images)

```jsx
import Image from "next/image";
import logo from "@/public/logo.png";

export default function Home() {
  return <Image src={logo} alt="Logo" width={120} height={60} />;
}
```

`next/image` handles lazy-loading, resizing, and optimization.

---

## 🔁 Rendering Types (Quick summary)

- **SSR** — server renders each request (use for user-specific pages).
- **SSG** — generate HTML at build time (use for blogs, docs).
- **ISR** — regenerate static pages periodically.
- **CSR** — client rendered (use for non-SEO, highly interactive parts).

In App Router, data fetching inside Server Components can be `await`ed directly (async components).

---

## 🛠 Mini Project (Hands-on)

**Goal:** Build `nextjs-level1` with layout + 3 pages + client counter.

1. `npx create-next-app@latest nextjs-level1`  
2. Inside `src/app/`:
   - Create `layout.js` (use example above).
   - Create `page.js` (`/` home).
   - Create `about/page.js` and `contact/page.js`.
   - Create a client component `src/components/Counter.jsx`:
     ```jsx
     "use client";
     import { useState } from "react";
     export default function Counter() {
       const [c, setC] = useState(0);
       return (
         <div>
           <p>Count: {c}</p>
           <button onClick={() => setC(c + 1)}>+1</button>
         </div>
       );
     }
     ```
   - Import `<Counter />` into `page.js`.

3. Add metadata for each page and test routes:
   - `/`, `/about`, `/contact`
4. Confirm header/footer from `layout.js` shows on all pages.

---

## ✅ Quick Tips & Gotchas

- Global CSS can only be imported in `layout.js` (or root). Importing global CSS elsewhere will error.
- Keep layout minimal; heavy client logic belongs in components that opt into `"use client"`.
- `Link` from `next/link` is used for internal navigation — it works in server components.
- If you fetch auth/session info in layout, prefer server-side fetch (async Server Component) for SSR.

---

## 📚 References (Official)
- Next.js Docs — Layouts & App Router: https://nextjs.org/docs/app/building-your-application/routing/pages-and-layouts  
- Metadata API: https://nextjs.org/docs/app/api-reference/functions/metadata  
- next/font docs: https://nextjs.org/docs/basic-features/font-optimization

---

## ✅ Assignment Checklist

- [ ] Create project `nextjs-level1`
- [ ] Implement `src/app/layout.js` (header + footer)
- [ ] Add pages: `/`, `/about`, `/contact`
- [ ] Add a client component (`Counter`) and use it on home page
- [ ] Add metadata to each page
- [ ] Try converting header interactions to a client component (move only interactive parts to `"use client"`)

---

> Next step suggestion: I can prepare **Level 2 — Routing** notes (Static, Dynamic, Nested routes + `generateStaticParams`) in the same detailed, copy-ready format. Want me to make that now?
